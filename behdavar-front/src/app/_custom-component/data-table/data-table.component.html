<div class="card my-1">
  <div fxLayout="row" fxLayoutAlign="space-between center" class="card-header py-0 m-0">
    <h6 class="m-0 p-0">{{title}}</h6>
    <div>
      <button color="" *ngIf="columnSelectable" mat-icon-button [matMenuTriggerFor]="selectColumnMenu"
              matTooltip="انتخاب ستون ها"
              matTooltipPosition="below">
        <mat-icon>add_box</mat-icon>
      </button>
      <mat-menu #selectColumnMenu="matMenu">
        <div fxLayout="row" fxLayoutAlign="start start" fxLayoutGap="1rem" class="p-2" (click)="$event.stopPropagation();" >
          <mat-selection-list class="overflow-auto" style="max-height: 25rem" (selectionChange)="onSelectColumnToShow($event)">
            <mat-list-option *ngFor="let column of selectableColumns" [selected]="true" [value]="column.colName">
              {{column.title}}
            </mat-list-option>
          </mat-selection-list>

        </div>
      </mat-menu>
      <button mat-icon-button (click)="reloadTable()"
              matTooltip="بروزرسانی"
              matTooltipPosition="below">
        <mat-icon>cached</mat-icon>
      </button>
    </div>
  </div>
  <div class="card-body p-0">
    <table mat-table [dataSource]="httpDataSource" matSort class="w-100">
      <!-- Checkbox Column -->
      <ng-container matColumnDef="select">
        <th mat-header-cell style="min-width: 5rem" *matHeaderCellDef>
          <mat-checkbox *ngIf="multiSelectable else doubleDash" (change)="$event ? masterToggle() : null"
                        [checked]="selection.hasValue() && isAllSelected()"
                        [indeterminate]="selection.hasValue() && !isAllSelected()"
                        [aria-label]="checkboxLabel()">
          </mat-checkbox>
          <ng-template #doubleDash>
            <span>--</span>
          </ng-template>

        </th>
        <td mat-cell style="min-width: 5rem" *matCellDef="let row">
          <mat-checkbox (click)="$event.stopPropagation()"
                        (change)="$event ? selection.toggle(row) : null"
                        [checked]="selection.isSelected(row)"
                        [aria-label]="checkboxLabel(row)">
          </mat-checkbox>
        </td>
      </ng-container>

      <ng-container matColumnDef="rowNo">
        <th mat-header-cell style="min-width: 5rem" *matHeaderCellDef mat-sort-header> {{rowNoTitle}}</th>
        <td mat-cell style="min-width: 5rem" *matCellDef="let element; let i = index;"> {{i + 1 }} </td>
      </ng-container>

      <ng-container *ngFor="let col of tableColumns" [matColumnDef]="col.colName">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> {{col.title}}</th>
        <td mat-cell *matCellDef="let element"> {{getColumnValue(element, col) }} </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="columnToDisplay"></tr>
      <tr mat-row *matRowDef="let row; columns: columnToDisplay;" (click)="selection.toggle(row)"></tr>
    </table>
    <mat-paginator (page)="onPageChange()" [pageSizeOptions]="[5, 10]" [length]="totalRecord$ | async"
                   [pageSize]="5"
                   showFirstLastButtons></mat-paginator>
  </div>
</div>
